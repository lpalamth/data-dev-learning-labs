...Contd.

###### Step 16:

Navigate to DLP and click on the <b>Drill</b> button shown on top-right corner of the screen as shown in screenshot below:

![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-visualization-with-zeppelin/assets/images/image1DrillButton.PNG?raw=true)


###### Step 17:

User would be presented with two options - Zeppelin and Jupyter. Select Zeppelin.

![alt-tag](https://github.com/prakdutt/data-dev-learning-labs/blob/master/labs/data-explore-using-zeppelin/assets/selectZappline.PNG?raw=true)

(The pop-up may be blocked in browser configuration. Click on the red pop up blocker icon and select <b>Always allow pop-up from http://xxx.xxx.xxx.xxx </b> and click on <b>Done</b> button.) </br> 

![alt-tag](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-explore-using-zeppelin/assets/popUpBlockerAllowed.PNG?raw=true).

On enabling the pop-up, Zeppelin would open in a new tab taking the user to Zeppelin home page. 





<b>Step 13:</b> We need to configure Zeppelin. When the Trucq micro service is running, we need to collect the IP and Port from the End Point for SQL query listener.</br>
We will get the Trucq port number from <b>Step 7</b>
![Figure](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/develop-stream-handler-cisco-csa/assets/images/CSA_4.png?raw=true)

Now we need to create a new Zeppelin Notebook for CSA and edit the PSQL configuration with below mentioned parameters.<br>

Click <b>Interpreter</b> from Zepplin and reach <b>psql</b> section. After clicking on <b>Edit</b> button, edit the respective details given in below and click on <b>Save</b> button. 
![Figure](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/develop-stream-handler-cisco-csa/assets/images/ZapplineConfigurationRestartImage.png?raw=true) </br>

```
postgresql.driver.name    :  org.postgresql.Driver
postgresql.max.result     :  1000
postgresql.password	  : 
postgresql.url		  :  jdbc:postgresql://10.10.10.92:11841/cqdb
postgresql.user	          :  trucq

```

After clicking on <b>Save</b> button, click the <b>OK</b> button for final updation. </br>
![Figure](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/develop-stream-handler-cisco-csa/assets/images/ZapplineConfigurationUpdate.PNG?raw=true)

After setting the above value, click on the <b>Restart</b> button.
![Figure](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/develop-stream-handler-cisco-csa/assets/images/ZapplineConfigurationRe.PNG?raw=true) </br>
<b>Above settings in Zeppelin, helps to configure it with Postgresql database. We can apply SQL queries on Zeppelin for interacting with Postgresql database and display output in graphical format. We need to configure a Zeppelin notbook editor where we can insert SQL queries. Below steps describe the process of configuring Zeppelin notebook.</b> 
</br></br>
<b> Develop in Zeppelin notebook. </b>

1. On the Zeppelin homepage, create your own notebook by click on &quot;Create new note&quot;.
![Figure](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/develop-stream-handler-cisco-csa/assets/images/welcome-to-zeppelin-notebook.png?raw=true)

2. Create and name your new notebook in the pop up dialog.
![Figure](https://github.com/prakdutt/data-dev-learning-labs/blob/master/labs/data-explore-using-zeppelin/assets/create-note.png?raw=true)

3. In your newly created notebook, a typical Zeppelin interactive development and visualization working environment.

![alt-tag](https://github.com/prakdutt/data-dev-learning-labs/blob/master/labs/data-explore-using-zeppelin/assets/ZapplineIntf.PNG?raw=true)


<b>Step 14:</b> After restarting the configuration we can execute the SQL queries to the CSA engine and plot the graph according to data stream. 
Till now, we have configured the process of reading log data from multiple Web servers located in different location. In below, we will do the query to view the log data using sql query on web server's log data which are stored in postgresql database(configured in above steps). User can learn the process of log status from log data using sql query and display the data in different format(table/graph) as per their choice. 

```
%psql
select * from apachelog.sapachelog_archive order by access_time DESC limit 300
```
Input above sql query in te Zeppelin and execute the query by clicking on the Execute button(marked with Red color box).
![Figure](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/develop-stream-handler-cisco-csa/assets/images/sqlinZeppelin.PNG?raw=true)

This query will show the output as below. It is showing the web server's log server data from CSA engine. These log data are stored in the postgresql database which is mentioned in above step. 
![Figure](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/develop-stream-handler-cisco-csa/assets/images/ZepplinePreview.png?raw=true)

On clicking on the Settings icon(marked in above image), we can drag and drop the fields as mentioned in below screen and display the output as graph format. User can change the graph based on their choice. 
![Figure](https://github.com/prakdutt/data-dev-learning-labs/blob/master/labs/develop-stream-handler-cisco-csa/assets/images/zeppelinSqlQurery.png?raw=true)



 


## <center>Thank You</center>
